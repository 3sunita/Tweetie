/**
 * Tweetie: A simple Twitter feed plugin
 * Author: Sonny T. <hi@sonnyt.com>, sonnyt.com
 */(function(e){e.fn.twittie=function(){var t=arguments[0]instanceof Object?arguments[0]:{},n=typeof arguments[0]=="function"?arguments[0]:arguments[1],r=e.extend({count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}"},t),i=function(e){var t=e.split(" "),n="";for(var r=0,i=t.length;r<i;r++){var s=t[r],o="https://twitter.com/#!/";s.indexOf("#")!==-1&&(s='<a href="'+o+"search/"+s.replace("#","%23").replace(/[^A-Za-z0-9]/,"")+'" target="_blank">'+s+"</a>");s.indexOf("@")!==-1&&(s='<a href="'+o+s.replace("@","").replace(/[^A-Za-z0-9]/,"")+'" target="_blank">'+s+"</a>");s.indexOf("http://")!==-1&&(s='<a href="'+s+'" target="_blank">'+s+"</a>");n+=s+" "}return n},s=function(e){var t=e.split(" ");e=new Date(Date.parse(t[1]+" "+t[2]+", "+t[5]+" "+t[3]+" UTC"));var n=["January","February","March","April","May","June","July","August","September","October","November","December"],i={"%d":e.getDate(),"%m":e.getMonth()+1,"%b":n[e.getMonth()].substr(0,3),"%B":n[e.getMonth()],"%y":String(e.getFullYear()).slice(-2),"%Y":e.getFullYear()},s=r.dateFormat,o=r.dateFormat.match(/%[dmbByY]/g);for(var u=0,a=o.length;u<a;u++)s=s.replace(o[u],i[o[u]]);return s},o=function(e){var t=r.template,n=["date","tweet","avatar"];for(var i=0,s=n.length;i<s;i++)t=t.replace(new RegExp("{{"+n[i]+"}}","gi"),e[n[i]]);return t};this.html("<span>Loading...</span>");var u=this;e.getJSON("api/tweet.php",{count:r.count,exclude_replies:r.hideReplies},function(e){u.find("span").fadeOut("fast",function(){u.html("<ul></ul>");for(var t=0;t<r.count;t++){if(!e[t])break;var a={date:s(e[t].created_at),tweet:i(e[t].text),avatar:'<img src="'+e[t].user.profile_image_url+'" />'};u.find("ul").append("<li>"+o(a)+"</li>")}typeof n=="function"&&n()})})}})(jQuery);